<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>User Guide: nmodl::visitor::DUInstance Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_nmodl.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classnmodl_1_1visitor_1_1_d_u_instance.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classnmodl_1_1visitor_1_1_d_u_instance-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">nmodl::visitor::DUInstance Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represent use of a variable in the statement.  
 <a href="classnmodl_1_1visitor_1_1_d_u_instance.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represent use of a variable in the statement. </p>
<p>For a given variable, say tau, when we have statement like <code>a = tau + c + tau</code> then def-use is simply <code>[<a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9a4c614360da93c0a041b22e537de151eb" title="global variable is used ">DUState::U</a>, <a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9a4c614360da93c0a041b22e537de151eb" title="global variable is used ">DUState::U</a>]</code>. But if we have if-else block like:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;IF (...) {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    a = tau</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    tau = c + d</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;} ELSE {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    tau = b</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;}</div></div><!-- fragment --><p>Then to know the effective result, we have to analyze def-use in <code>IF</code> and <code>ELSE</code> blocks i.e. if variable is used in any of the if-elseif-else block then it needs to mark as <code><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9a4c614360da93c0a041b22e537de151eb" title="global variable is used ">DUState::U</a></code>. Hence we keep the track of all children in case of statements like if-else. </p>

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8hpp_source.html#l00079">79</a> of file <a class="el" href="defuse__analyze__visitor_8hpp_source.html">defuse_analyze_visitor.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="defuse__analyze__visitor_8hpp_source.html">defuse_analyze_visitor.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a44e92315350d787f71a1dccf978cafc4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#a44e92315350d787f71a1dccf978cafc4">DUInstance</a> (<a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a> <a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#a600f82b877dc60c5fd45e9ba859836a5">state</a>)</td></tr>
<tr class="separator:a44e92315350d787f71a1dccf978cafc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46eab02dc5dbd5d36bb84e3d7c3f029a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#a46eab02dc5dbd5d36bb84e3d7c3f029a">eval</a> ()</td></tr>
<tr class="memdesc:a46eab02dc5dbd5d36bb84e3d7c3f029a"><td class="mdescLeft">&#160;</td><td class="mdescRight">analyze all children and return "effective" usage  <a href="#a46eab02dc5dbd5d36bb84e3d7c3f029a">More...</a><br /></td></tr>
<tr class="separator:a46eab02dc5dbd5d36bb84e3d7c3f029a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7ef0c28b7ebe8b5a5345092f748808d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#ae7ef0c28b7ebe8b5a5345092f748808d">sub_block_eval</a> ()</td></tr>
<tr class="memdesc:ae7ef0c28b7ebe8b5a5345092f748808d"><td class="mdescLeft">&#160;</td><td class="mdescRight">if, elseif and else evaluation  <a href="#ae7ef0c28b7ebe8b5a5345092f748808d">More...</a><br /></td></tr>
<tr class="separator:ae7ef0c28b7ebe8b5a5345092f748808d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1724beaacbe1e474be44aa0874da9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#a0f1724beaacbe1e474be44aa0874da9b">conditional_block_eval</a> ()</td></tr>
<tr class="memdesc:a0f1724beaacbe1e474be44aa0874da9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">evaluate global usage i.e. with [D,U] states of children  <a href="#a0f1724beaacbe1e474be44aa0874da9b">More...</a><br /></td></tr>
<tr class="separator:a0f1724beaacbe1e474be44aa0874da9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d13243a03ca7b7c161e92036ba9c607"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#a4d13243a03ca7b7c161e92036ba9c607">print</a> (<a class="el" href="classnmodl_1_1printer_1_1_j_s_o_n_printer.html">printer::JSONPrinter</a> &amp;printer)</td></tr>
<tr class="memdesc:a4d13243a03ca7b7c161e92036ba9c607"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html" title="Represent use of a variable in the statement. ">DUInstance</a> to JSON string.  <a href="#a4d13243a03ca7b7c161e92036ba9c607">More...</a><br /></td></tr>
<tr class="separator:a4d13243a03ca7b7c161e92036ba9c607"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a600f82b877dc60c5fd45e9ba859836a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#a600f82b877dc60c5fd45e9ba859836a5">state</a></td></tr>
<tr class="memdesc:a600f82b877dc60c5fd45e9ba859836a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">state of the usage  <a href="#a600f82b877dc60c5fd45e9ba859836a5">More...</a><br /></td></tr>
<tr class="separator:a600f82b877dc60c5fd45e9ba859836a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c4c17cd88b42ad800695b80e50ceda"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html">DUInstance</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#a78c4c17cd88b42ad800695b80e50ceda">children</a></td></tr>
<tr class="memdesc:a78c4c17cd88b42ad800695b80e50ceda"><td class="mdescLeft">&#160;</td><td class="mdescRight">usage of variable in case of if like statements  <a href="#a78c4c17cd88b42ad800695b80e50ceda">More...</a><br /></td></tr>
<tr class="separator:a78c4c17cd88b42ad800695b80e50ceda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a44e92315350d787f71a1dccf978cafc4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">nmodl::visitor::DUInstance::DUInstance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8hpp_source.html#l00087">87</a> of file <a class="el" href="defuse__analyze__visitor_8hpp_source.html">defuse_analyze_visitor.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0f1724beaacbe1e474be44aa0874da9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a> nmodl::visitor::DUInstance::conditional_block_eval </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>evaluate global usage i.e. with [D,U] states of children </p>
<p>Evaluate conditional block containing sub-blocks like if, elseif and else.</p>
<p>Note that sub-blocks are already evaluated by <a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html#ae7ef0c28b7ebe8b5a5345092f748808d" title="if, elseif and else evaluation ">sub_block_eval()</a> and has only leaf nodes. In order to find effective defuse, following rules are used:</p>
<ul>
<li>If variable is "used" in any of the sub-block then it's effectively "U". This is because any branch can be taken at runtime.</li>
<li>If variable is "defined" in all sub-blocks doesn't mean that it's effectively "D". This is because if we can have just "if-elseif" which could never be taken. Same for empty "if". In order to decide if it is "D", we make sure there is no empty block and there must be "else" block with "D". Note that "U" definitions are already covered in 1) and hence this rule is safe.</li>
<li>If there is an "if" with "D" or empty "if" followed by "D" in "else" block, we can't say it's definition. In this case we return "CD".</li>
<li>If there is empty "if" followed by "U" in "else" block, we can say it's "use". This is because we don't want to "localize" such variables.</li>
<li>If we reach else block with either D or CD and if there is no empty block encountered, this means every block has either "D" or "CD". In this case we can say that entire block effectively has "D". </li>
</ul>

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8cpp_source.html#l00128">128</a> of file <a class="el" href="defuse__analyze__visitor_8cpp_source.html">defuse_analyze_visitor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a46eab02dc5dbd5d36bb84e3d7c3f029a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a> nmodl::visitor::DUInstance::eval </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>analyze all children and return "effective" usage </p>
<p>Find "effective" usage of variable from def-use chain.</p>
<p>Note that we are interested in "global" variable usage and hence we consider only [U,D] states and not [LU, LD] </p>

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8cpp_source.html#l00157">157</a> of file <a class="el" href="defuse__analyze__visitor_8cpp_source.html">defuse_analyze_visitor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4d13243a03ca7b7c161e92036ba9c607"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nmodl::visitor::DUInstance::print </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classnmodl_1_1printer_1_1_j_s_o_n_printer.html">printer::JSONPrinter</a> &amp;&#160;</td>
          <td class="paramname"><em>printer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html" title="Represent use of a variable in the statement. ">DUInstance</a> to JSON string. </p>

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8cpp_source.html#l00055">55</a> of file <a class="el" href="defuse__analyze__visitor_8cpp_source.html">defuse_analyze_visitor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae7ef0c28b7ebe8b5a5345092f748808d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a> nmodl::visitor::DUInstance::sub_block_eval </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>if, elseif and else evaluation </p>
<p>Evaluate sub-blocks like if, elseif and else As these are innermost blocks, we have to just check first use of variable in this block and that's the result of this block. </p>

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8cpp_source.html#l00087">87</a> of file <a class="el" href="defuse__analyze__visitor_8cpp_source.html">defuse_analyze_visitor.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a78c4c17cd88b42ad800695b80e50ceda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html">DUInstance</a>&gt; nmodl::visitor::DUInstance::children</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>usage of variable in case of if like statements </p>

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8hpp_source.html#l00085">85</a> of file <a class="el" href="defuse__analyze__visitor_8hpp_source.html">defuse_analyze_visitor.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a600f82b877dc60c5fd45e9ba859836a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacenmodl_1_1visitor.html#a68c860c43f4bea4e1af16c016d2959f9">DUState</a> nmodl::visitor::DUInstance::state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>state of the usage </p>

<p>Definition at line <a class="el" href="defuse__analyze__visitor_8hpp_source.html#l00082">82</a> of file <a class="el" href="defuse__analyze__visitor_8hpp_source.html">defuse_analyze_visitor.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/travis/build/BlueBrain/nmodl/src/visitors/<a class="el" href="defuse__analyze__visitor_8hpp_source.html">defuse_analyze_visitor.hpp</a></li>
<li>/home/travis/build/BlueBrain/nmodl/src/visitors/<a class="el" href="defuse__analyze__visitor_8cpp_source.html">defuse_analyze_visitor.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="navelem"><a class="el" href="namespacenmodl.html">nmodl</a></li><li class="navelem"><a class="el" href="namespacenmodl_1_1visitor.html">visitor</a></li><li class="navelem"><a class="el" href="classnmodl_1_1visitor_1_1_d_u_instance.html">DUInstance</a></li>
  </ul>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
    </small>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
