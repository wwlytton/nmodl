<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>User Guide: The NMODL Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_nmodl.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Overview</span></a></li>
      <li><a href="modules.html"><span>Components</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The NMODL Framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/BlueBrain/nmodl"></a> <a href="https://dev.azure.com/pramodskumbhar/nmodl/_build/latest?definitionId=2&amp;branchName=master"></a></p>
<p>The NMODL Framework is a code generation engine for **N**EURON **MOD**eling **L**anguage (<a href="https://www.neuron.yale.edu/neuron/static/py_doc/modelspec/programmatic/mechanisms/nmodl.html">NMODL</a>). It is designed with modern compiler and code generation techniques to:</p>
<ul>
<li>Provide <b>modular tools</b> for parsing, analysing and transforming NMODL</li>
<li>Provide <b>easy to use</b>, high level Python API</li>
<li>Generate <b>optimised code</b> for modern compute architectures including CPUs, GPUs</li>
<li><b>Flexibility</b> to implement new simulator backends</li>
<li>Support for <b>full</b> NMODL specification</li>
</ul>
<h3>About NMODL</h3>
<p>Simulators like <a href="https://www.neuron.yale.edu/neuron/">NEURON</a> use NMODL as a domain specific language (DSL) to describe a wide range of membrane and intracellular submodels. Here is an example of exponential synapse specified in NMODL:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;NEURON {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    POINT_PROCESS ExpSyn</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    RANGE tau, e, i</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    NONSPECIFIC_CURRENT i</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;}</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;UNITS {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    (nA) = (nanoamp)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    (mV) = (millivolt)</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    (uS) = (microsiemens)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;}</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;PARAMETER {</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    tau = 0.1 (ms) &lt;1e-9,1e9&gt;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    e = 0 (mV)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;ASSIGNED {</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    v (mV)</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    i (nA)</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;}</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;STATE {</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    g (uS)</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;}</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;INITIAL {</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    g = 0</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;}</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;BREAKPOINT {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    SOLVE state METHOD cnexp</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    i = g*(v - e)</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;DERIVATIVE state {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    g&#39; = -g/tau</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;NET_RECEIVE(weight (uS)) {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    g = g + weight</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div></div><!-- fragment --><h3>Installation</h3>
<p>See https://github.com/BlueBrain/nmodl/blob/master/INSTALL.md "INSTALL.md" for detailed instructions to build the NMODL from source.</p>
<h3>Try NMODL with Docker</h3>
<p>To quickly test the NMODL Framework's analysis capabilities we provide a <a href="https://www.docker.com">docker</a> image, which includes the NMODL Framework python library and a fully functional Jupyter notebook environment. After installing <a href="https://docs.docker.com/compose/install/">docker</a> and <a href="https://docs.docker.com/compose/install/">docker-compose</a> you can pull and run the NMODL image from your terminal.</p>
<p>To try Python interface directly from CLI, you can run docker image as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;docker run -it --entrypoint=/bin/sh bluebrain/nmodl</div></div><!-- fragment --><p>And try NMODL Python API discussed later in this README as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ python3</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Python 3.6.8 (default, Apr  8 2019, 18:17:52)</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;&gt;&gt;&gt; from nmodl import dsl</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;&gt;&gt;&gt; import os</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;&gt;&gt;&gt; examples = dsl.list_examples()</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;&gt;&gt;&gt; nmodl_string = dsl.load_example(examples[-1])</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;...</div></div><!-- fragment --><p>To try Jupyter notebooks you can download docker compose file and run it as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;wget &quot;https://raw.githubusercontent.com/BlueBrain/nmodl/master/docker/docker-compose.yml&quot;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;DUID=$(id -u) DGID=$(id -g) HOSTNAME=$(hostname) docker-compose up</div></div><!-- fragment --><p>If all goes well you should see at the end status messages similar to these:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[I 09:49:53.923 NotebookApp] The Jupyter Notebook is running at:</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[I 09:49:53.923 NotebookApp] http://(4c8edabe52e1 or 127.0.0.1):8888/?token=a7902983bad430a11935</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[I 09:49:53.923 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    To access the notebook, open this file in a browser:</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        file:///root/.local/share/jupyter/runtime/nbserver-1-open.html</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    Or copy and paste one of these URLs:</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        http://(4c8edabe52e1 or 127.0.0.1):8888/?token=a7902983bad430a11935</div></div><!-- fragment --><p>Based on the example above you should then open your browser and navigate to the URL <code><a href="http://127.0.0.1:8888/?token=a7902983bad430a11935">http://127.0.0.1:8888/?token=a7902983bad430a11935</a></code>.</p>
<p>You can open and run all example notebooks provided in the <code>examples</code> folder. You can also create new notebooks in <code>my_notebooks</code>, which will be stored in a subfolder <code>notebooks</code> at your current working directory.</p>
<h3>Using the Python API</h3>
<p>Once the NMODL Framework is installed, you can use the Python parsing API to load NMOD file as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;from nmodl import dsl</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;examples = dsl.list_examples() </div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;nmodl_string = dsl.load_example(examples[-1])</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;driver = dsl.NmodlDriver()</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;modast = driver.parse_string(nmodl_string)</div></div><!-- fragment --><p>The <code>parse_file</code> API returns Abstract Syntax Tree (<a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a>) representation of input NMODL file. One can look at the AST by converting to JSON form as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&gt;&gt;&gt; print (dsl.to_json(modast))</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;Program&quot;: [</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    {</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;      &quot;NeuronBlock&quot;: [</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;          &quot;StatementBlock&quot;: [</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            {</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;              &quot;Suffix&quot;: [</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                {</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                  &quot;Name&quot;: [</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                    {</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                      &quot;String&quot;: [</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                        {</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                          &quot;name&quot;: &quot;POINT_PROCESS&quot;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                        }</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                    ...</div></div><!-- fragment --><p> Every key in the JSON form represent a node in the AST. You can also use visualization API to look at the details of AST as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;from nmodl import ast</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;ast.view(modast)</div></div><!-- fragment --><p>which will open AST view in web browser:</p>
<div class="image">
<img src="https://user-images.githubusercontent.com/666852/57329449-12c9a400-7114-11e9-8da5-0042590044ec.gif"  alt="ast_viz" title="AST representation of expsyn.mod"/>
</div>
<p>The central <em>Program</em> node represents the whole MOD file and each of it's children represent the block in the input NMODL file. Note that this requires X-forwarding if you are using Docker image.</p>
<p>Once the AST is created, one can use exisiting visitors to perform various analysis/optimisations. One can also easily write his own custom visitor using Python Visitor API. See <a href="docs/notebooks/nmodl-python-tutorial.ipynb">Python API tutorial</a> for details.</p>
<p>NMODL Frameowrk also allows to transform AST representation back to NMODL form as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&gt;&gt;&gt; print (dsl.to_nmodl(modast))</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;NEURON {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    POINT_PROCESS ExpSyn</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    RANGE tau, e, i</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    NONSPECIFIC_CURRENT i</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;}</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;UNITS {</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    (nA) = (nanoamp)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    (mV) = (millivolt)</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    (uS) = (microsiemens)</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;}</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;PARAMETER {</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    tau = 0.1 (ms) &lt;1e-09,1000000000&gt;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    e = 0 (mV)</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;}</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;...</div></div><!-- fragment --><h3>High Level Analysis and Code Generation</h3>
<p>The NMODL Framework provides rich model introspection and analysis capabilities using <a href="https://bluebrain.github.io/nmodl/html/doxygen/group__visitor__classes.html">various visitors</a>. Here is an example of theoretical performance characterisation of channels and synapses from rat neocortical column microcircuit <a href="https://www.cell.com/abstract/S0092-8674%2815%2901191-5">published in 2015</a>:</p>
<div class="image">
<img src="https://user-images.githubusercontent.com/666852/57336711-2cc0b200-7127-11e9-8053-8f662e2ec191.png"  alt="nmodl-perf-stats" title="Example of performance characterisation"/>
</div>
<p>To understand how you can write your own introspection and analysis tool, see <a href="docs/notebooks/nmodl-python-tutorial.ipynb">this tutorial</a>.</p>
<p>Once analysis and optimization passes are performed, the NMODL Framework can generate optimised code for modern compute architectures including CPUs (Intel, AMD, ARM) and GPUs (NVIDIA, AMD) platforms. For example, C++, OpenACC, OpenMP, CUDA and ISPC backends are implemented and one can choose these backends on command line as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ nmodl expsyn.mod host --ispc acc --cuda sympy --analytic</div></div><!-- fragment --><p>Here is an example of generated <a href="https://ispc.github.io/">ISPC</a> kernel for DERIVATIVE block :</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;export void nrn_state_ExpSyn(uniform ExpSyn_Instance* uniform inst, uniform NrnThread* uniform nt ...) {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    uniform int nodecount = ml-&gt;nodecount;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    const int* uniform node_index = ml-&gt;nodeindices;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    const double* uniform voltage = nt-&gt;actual_v;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    int uniform start = 0;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    int uniform end = nodecount;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    foreach (id = start ... end) {</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        int node_id = node_index[id];</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        double v = voltage[node_id];</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        inst-&gt;g[id] = inst-&gt;g[id] * vexp( -nt-&gt;dt / inst-&gt;tau[id]);</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    }</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;}</div></div><!-- fragment --><p>To know more about code generation backends, <a href="https://bluebrain.github.io/nmodl/html/doxygen/group__codegen__backends.html">see here</a>. NMODL Framework provides number of options (for code generation, optimization passes and ODE solver) which can be listed as:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ nmodl -H</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;NMODL : Source-to-Source Code Generation Framework</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;Usage: /path/&lt;&gt;/nmodl [OPTIONS] file... [SUBCOMMAND]</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Positionals:</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  file TEXT:FILE ... REQUIRED           One or more MOD files to process</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;Options:</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  -h,--help                             Print this help message and exit</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  -H,--help-all                         Print this help message including all sub-commands</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  -v,--verbose                          Verbose logger output</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  -o,--output TEXT=.                    Directory for backend code output</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  --scratch TEXT=tmp                    Directory for intermediate code output</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  --units TEXT=/path/&lt;&gt;/nrnunits.lib</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                        Directory of units lib file</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;Subcommands:</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;host</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  HOST/CPU code backends</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  Options:</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    --c                                   C/C++ backend</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    --omp                                 C/C++ backend with OpenMP</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    --ispc                                C/C++ backend with ISPC</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;acc</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  Accelerator code backends</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  Options:</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    --oacc                                C/C++ backend with OpenACC</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    --cuda                                C/C++ backend with CUDA</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;sympy</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  SymPy based analysis and optimizations</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  Options:</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    --analytic                            Solve ODEs using SymPy analytic integration</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    --pade                                Pade approximation in SymPy analytic integration</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    --cse                                 CSE (Common Subexpression Elimination) in SymPy analytic integration</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    --conductance                         Add CONDUCTANCE keyword in BREAKPOINT</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;passes</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  Analyse/Optimization passes</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  Options:</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    --inline                              Perform inlining at NMODL level</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    --unroll                              Perform loop unroll at NMODL level</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    --const-folding                       Perform constant folding at NMODL level</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    --localize                            Convert RANGE variables to LOCAL</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    --localize-verbatim                   Convert RANGE variables to LOCAL even if verbatim block exist</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    --local-rename                        Rename LOCAL variable if variable of same name exist in global scope</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    --verbatim-inline                     Inline even if verbatim block exist</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    --verbatim-rename                     Rename variables in verbatim block</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    --json-ast                            Write AST to JSON file</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    --nmodl-ast                           Write AST to NMODL file</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    --json-perf                           Write performance statistics to JSON file</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    --show-symtab                         Write symbol table to stdout</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;codegen</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  Code generation options</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  Options:</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    --layout TEXT:{aos,soa}=soa           Memory layout for code generation</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    --datatype TEXT:{float,double}=soa    Data type for floating point variables</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    --force                               Force code generation even if there is any code incompatibility</div></div><!-- fragment --><h3>Documentation</h3>
<p>We are working on user documentation, you can find current drafts of :</p>
<ul>
<li><a href="https://bluebrain.github.io/nmodl/">User Documentation</a></li>
<li><a href="https://bluebrain.github.io/nmodl/html/doxygen/index.html">Developer / API Documentation</a></li>
</ul>
<h3>Citation</h3>
<p>If you would like to know more about the the NMODL Framework, see following paper:</p>
<ul>
<li>Pramod Kumbhar, Omar Awile, Liam Keegan, Jorge Alonso, James King, Michael Hines and Felix Schürmann. 2019. An optimizing multi-platform source-to-source compiler framework for the NEURON MODeling Language. In Eprint : <a href="https://arxiv.org/pdf/1905.02241.pdf">arXiv:1905.02241</a></li>
</ul>
<h3>Support / Contribuition</h3>
<p>If you see any issue, feel free to <a href="https://github.com/BlueBrain/nmodl/issues/new">raise a ticket</a>. If you would like to improve this framework, see <a href="https://github.com/BlueBrain/nmodl/issues">open issues</a> and contribution guidelines.</p>
<h3>Examples / Benchmarks</h3>
<p>The benchmarks used to test the performance and parsing capabilities of NMODL Framework are currently being migrated to GitHub. These benchmarks will be published soon in following repositories:</p>
<ul>
<li><a href="https://github.com/BlueBrain/nmodlbench">NMODL Benchmark</a></li>
<li><a href="https://github.com/BlueBrain/nmodldb">NMODL Database</a></li>
</ul>
<h3>Authors</h3>
<p>See <a href="https://github.com/BlueBrain/nmodl/graphs/contributors">contributors</a>.</p>
<h3>Funding</h3>
<p>This work has been funded by the EPFL Blue Brain Project (funded by the Swiss ETH board), NIH grant number R01NS11613 (Yale University) and partially funded by the European Union's Horizon 2020 Framework Programme for Research and Innovation under Grant Agreement number 785907 (Human Brain Project SGA2). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <ul>
  </ul>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
    </small>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
